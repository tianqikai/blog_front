(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6635d7e3"],{"063c":function(t,e,o){"use strict";var n=o("b775"),s="comment";e["a"]={save:function(t){return Object(n["a"])({url:"/".concat(s,"/save"),method:"post",data:t})},getByPage:function(t){return Object(n["a"])({url:"/".concat(s,"/getList"),method:"post",data:t})},getList:function(t){return Object(n["a"])({url:"/".concat(s,"/getByBlog/").concat(t),method:"get"})},goodById:function(t){return Object(n["a"])({url:"/".concat(s,"/good"),method:"post",data:t})},deleteById:function(t){return Object(n["a"])({url:"/".concat(s,"/deleteById/").concat(t),method:"delete"})}}},"75a8":function(t,e,o){"use strict";o("d01a")},d01a:function(t,e,o){},f87a:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"blog-bg"},[o("div",{staticClass:"blog-title"},[t._v(t._s(t.blog.blogTitle))]),o("div",{staticClass:"blog-item"},[o("div",{staticClass:"blog-time"},[t._v("发布时间："+t._s(t._f("formatDate")(t.blog.createdTime)))]),o("div",{staticClass:"blog-meta"},[o("a-icon",{attrs:{type:"eye"}}),t._v(" "+t._s(t.blog.blogRead)+"阅读 "),o("a-icon",{attrs:{type:"heart"}}),t._v(" "+t._s(t.blog.blogCollection)+"收藏 "),o("a-icon",{attrs:{type:"like"}}),t._v(" "+t._s(t.blog.blogGoods)+"点赞 ")],1)]),o("div",{directives:[{name:"hljs",rawName:"v-hljs"}],staticClass:"blog-content",domProps:{innerHTML:t._s(t.blog.blogContent)}}),t.user.username?o("div",{staticClass:"blog-action"},[o("a",{class:t.isGood?" meta-active":"blog-good",attrs:{href:"javascript:void(0);"},on:{click:t.saveGoods}},[o("a-icon",{attrs:{type:"like"}}),t._v(" 点赞 ")],1),o("a",{class:t.isCollection?"meta-active":"blog-collection",attrs:{href:"javascript:void(0);"},on:{click:t.saveCollection}},[o("a-icon",{attrs:{type:"heart"}}),t._v(" 收藏 ")],1)]):t._e()]),t.user.username?o("div",{staticClass:"user-comment"},[o("a-textarea",{attrs:{placeholder:"请输入内容，不超过300字",rows:4},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),o("div",{staticClass:"comment-button"},[o("a-button",{attrs:{type:"primary"},on:{click:t.saveComment}},[t._v("发表评论")]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.countShow,expression:"countShow"}],staticClass:"content-count"},[t._v(" 还能输入 "+t._s(t.commentContentCount)+" 个字符 ")])],1)],1):t._e(),t._l(t.commentList,(function(e){return o("div",{key:e.id,staticClass:"comment-bg"},[o("div",{staticClass:"comment-header-container"},[o("div",{staticClass:"comment-header"},[o("img",{staticClass:"comment-img",attrs:{src:e.user.header}})]),o("div",{staticClass:"comment-container"},[o("div",{staticClass:"comment-nickname"},[t._v(t._s(e.user.nickname))]),o("div",{staticClass:"comment-time"},[t._v("发表于 "+t._s(t._f("formatDate")(e.createdTime)))]),o("div",{staticClass:"comment-content"},[t._v(t._s(e.commentContent))])])]),t.user.username?o("a",{class:e.commentFlag?"comment-good meta-active":"comment-good",attrs:{href:"javascript:void(0);"},on:{click:function(o){return t.saveCommentGoods(e)}}},[o("a-icon",{attrs:{type:"like"}}),t._v(" "+t._s(e.commentGood))],1):t._e()])}))],2)},s=[],a=o("864d"),i=o("063c"),c={data:function(){return{content:"",blog:{},isGood:!1,isCollection:!1,user:{username:""},commentList:[],countShow:!1,commentContentCount:300}},watch:{content:function(t,e){this.content.length>300&&(this.content=this.content.substring(0,300)),this.content.length>0?this.countShow=!0:this.countShow=!1;var o=t?t.length:0,n=e?e.length:0;this.commentContentCount=this.commentContentCount-(o-n)},"$route.params.id":function(t,e){this.getBlogInfo(t),this.getComment(),this.getGoods(),this.getCollection()}},created:function(){var t=this.$route.params.id;this.getBlogInfo(t),this.getComment(),this.getGoods(),this.getCollection(),this.user=this.$store.getters.getUser},methods:{getBlogInfo:function(t){var e=this;a["a"].readById(t).then((function(t){e.blog=t.data}))},getComment:function(){var t=this,e=this.$route.params.id;i["a"].getList(e).then((function(e){t.commentList=e.data}))},saveGoods:function(){var t=this;if(this.isGood)this.$message.error("您已点赞，请勿重复点赞");else{var e=this.$route.params.id,o={blogId:e};a["a"].goodByBlog(o).then((function(e){t.$message.info(e.msg),t.getGoods()}))}},saveCommentGoods:function(t){var e=this;if(t.commentFlag)this.$message.error("您已点赞，请勿重复点赞");else{var o=t.id,n={commentId:o};i["a"].goodById(n).then((function(o){e.$message.info(o.msg),t.commentGood=t.commentGood+1,e.getComment()}))}},getGoods:function(){var t=this,e=this.$route.params.id;a["a"].getGood(e).then((function(e){var o=e.data;t.isGood=0!==o}))},saveCollection:function(){var t=this;if(this.isCollection)this.$message.error("您已收藏，请勿重复收藏");else{var e=this.$route.params.id,o={blogId:e};a["a"].collectionByBlog(o).then((function(e){t.$message.info(e.msg),t.getCollection()}))}},getCollection:function(){var t=this,e=this.$route.params.id;a["a"].getCollection(e).then((function(e){var o=e.data;t.isCollection=0!==o}))},saveComment:function(){var t=this,e=this.$route.params.id,o={commentBlog:e,commentContent:this.content};i["a"].save(o).then((function(e){t.$message.info(e.msg),t.content="",t.getComment()}))}}},r=c,m=(o("75a8"),o("2877")),l=Object(m["a"])(r,n,s,!1,null,"6ada424c",null);e["default"]=l.exports}}]);